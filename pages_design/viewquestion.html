<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="UTF-8">

        <title>Rogo - Collaborative Questions & Answers</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet" />
        <link href="../css/font-awesome.min.css" rel="stylesheet" />
        <link href="../css/style.css" rel="stylesheet" />
    </head>

    <body class="_questions">

        <header>
            <div class="navbar navbar-fixed-top navbar-inverse">
                <div class="navbar-inner">
                    <div class="container">
                        <a class="brand" href="#"><i class="icon-comments-alt"></i> ROGO</a>
                        <ul class="nav">
                            <li class="_questions"><a href="index.html"><i class="icon-question-sign"></i> Questions</a></li>
                            <li class="_users"><a href=""><i class="icon-group"></i> Users</a></li>
                            <li class="_tags"><a href=""><i class="icon-tags"></i> Tags</a></li>
                            <li class="_signin"><a href="#"><i class="icon-signin"></i> Log in</a></li>
                            <li class="_signup"><a href="signup.html"><i class="icon-plus"></i> Sign up</a></li>
                        </ul>

                        <form class="navbar-search pull-right">
                            <input type="text" class="search-query" placeholder="Search">
                        </form>
                    </div>
                </div>
            </div>
        </header>

        <div class="container">
            <div class="row">
                <div class="question-header">
                    <h3>Passing JSON data between Python and Java Datagram Sockets</h3>
                </div>

                <div class="span9">
                    <div class="question-info">
                        <div class="question-side-container pull-left">
                            <img class="media-object" src="../img/imageholder.png">
                            <div class="vote-area">
                                <span class="vote-up active"></span>
                                <span class="vote-counter text-center">4344</span>
                                <span class="vote-down"></span>
                                <span class="remove text-center"><i class="icon-remove-sign icon-2x"></i></span>
                                <span class="edit text-center"><i class="icon-edit icon-2x"></i></span>
                            </div>
                        </div>
                        <div class="question-container">
                            <p class="question-body">
                                Hi. I have a very simple Java server and two clients. One client is Java based and other is python based. When I send any string from Java client to java server or vice versa it works fine. When I send any string from Java to python it also works fine. But when I send a string from python which is generated by python json lib using json.dumps, I receive a buffer in Java containing desired data and null bytes. There is no indication of start or end of string. How do i convert it back to String of same length. Currently the string has a lot of null bytes after JSON data is finished thats why I wont be able to parse that string correctly.
                            </p>
                            <div class="tags">
                                <a href="#" class="post-tag">java</a>
                                <a href="#" class="post-tag">python</a>
                                <a href="#" class="post-tag">json</a>
                                <a href="#" class="post-tag">sockets</a>
                                <a href="#" class="post-tag">datagram</a>
                            </div>
                            <div class="question-footer">
                                <div class="started">
                                    <span class="action-time">asked Mar 25</span>
                                    <div class="user-info">
                                        <a href="#" class="username">Hypnos</a>
                                        <span class="reputation"><i class="icon-trophy"></i> 122</span>
                                    </div>
                                </div>
                                <div class="started edited">
                                    <span class="action-time">edited Mar 26</span>
                                    <div class="user-info">
                                        <a href="#" class="username">Adilia</a>
                                        <span class="reputation"><i class="icon-trophy"></i> 1200</span>
                                    </div>
                                </div>
                            </div>
                            <div class="comments">
                                <div class="comment">
                                    Comment here! - <a href="#" class="username">miguelgazela</a><span class="action-time"> Mar 26</span> <i class="icon-remove-sign"></i>
                                </div>
                                <div class="comment">
                                    Another comment!
                                </div>
                                <a href="#" class="showMore">Show more comments...</a>
                                <form class="add_comment_form">
                                    <div class="control-group inputComment">
                                        <div class="controls">
                                            <textarea rows="3" placeholder="Write a comment..." class="inputComment" name="comment"></textarea>
                                        </div>
                                        <span class="help-block"></span>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="question-answers">
                        <div class="answers-header">
                            <h4><span class="anwers-counter">3</span> Answers</h4>
                        </div>
                        <div class="answers-container">
                            <div class="answer">
                                <div class="vote-area pull-left">
                                    <span class="vote-up"></span>
                                    <span class="vote-counter text-center hundreds">434</span>
                                    <span class="vote-down"></span>
                                    <span class="accept-answer text-center accepted"><i class="icon-ok-circle icon-2x"></i></span>
                                    <span class="remove text-center"><i class="icon-remove-sign icon-2x"></i></span>
                                    <span class="edit text-center"><i class="icon-save icon-2x"></i></span>
                                </div>
                                <div class="answer-container">
                                    <textarea class="editing-answer">In your java code you use a 1024 byte buffer to recieve udp packets, which will only be filled partially if you don't receive enough bytes. receivePacket.getData() simply returns this buffer. When you then convert it to a String, of course the remaining bytes will be filled with whatever was in the buffer before (in this case zero bytes, but could als be filled with content if you used it as receiving buffer before). The correct way to get the received data would be to use the getLength() and getOffset() methods of DatagramPacket:</textarea>

                                    <p class="answer-body hide">
                                        In your java code you use a 1024 byte buffer to recieve udp packets, which will only be filled partially if you don't receive enough bytes. receivePacket.getData() simply returns this buffer. When you then convert it to a String, of course the remaining bytes will be filled with whatever was in the buffer before (in this case zero bytes, but could als be filled with content if you used it as receiving buffer before). The correct way to get the received data would be to use the getLength() and getOffset() methods of DatagramPacket:
                                    </p>
                                    <div class="started">
                                        <span class="action-time">answered Mar 27</span>
                                        <div class="user-info">
                                            <a href="#" class="username">Julio</a>
                                            <span class="reputation"><i class="icon-trophy"></i> 435</span>
                                        </div>
                                    </div>
                                    <div class="started edited">
                                        <span class="action-time">edited Mar 28</span>
                                        <div class="user-info">
                                            <a href="#" class="username">Conser</a>
                                            <span class="reputation"><i class="icon-trophy"></i> 1409</span>
                                        </div>
                                    </div>
                                    <div class="comments">
                                        <div class="comment">
                                            Comment here!
                                        </div>
                                        <div class="comment">
                                            Another comment!
                                        </div>
                                        <form class="add_comment_form">
                                            <div class="control-group inputComment">
                                                <div class="controls">
                                                    <textarea rows="3" placeholder="" class="inputComment" name="comment"></textarea>
                                                </div>
                                                <span class="help-block"></span>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="answer">
                                <div class="vote-area pull-left">
                                    <span class="vote-up"></span>
                                    <span class="vote-counter text-center hundreds">23</span>
                                    <span class="vote-down"></span>
                                    <span class="accept-answer text-center accepted"><i class="icon-ok-circle icon-2x"></i></span>
                                </div>
                                <div class="answer-container">
                                    <p class="answer-body">
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin aliquam sem eu lorem dictum gravida. Quisque eget mi eu turpis accumsan pulvinar. Donec ut nunc turpis. Donec aliquam sodales sodales. Maecenas congue diam eu ante interdum bibendum. Donec viverra tincidunt lacus, vel convallis metus viverra id. Sed vitae posuere magna. Nam iaculis pulvinar nisl, in eleifend quam ultricies quis. Vestibulum sed sem non lorem semper rhoncus. Quisque at tellus in nibh pulvinar malesuada ac non lectus.
                                    </p>
                                    <div class="started">
                                        <span class="action-time">answered May 12</span>
                                        <div class="user-info">
                                            <a href="#" class="username">harley-davidson</a>
                                            <span class="reputation"><i class="icon-trophy"></i> 290</span>
                                        </div>
                                    </div>
                                    <div class="comments">
                                        <form class="add_comment_form">
                                            <div class="control-group inputComment">
                                                <div class="controls">
                                                    <textarea rows="3" placeholder="" class="inputComment" name="comment"></textarea>
                                                </div>
                                                <span class="help-block"></span>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="answer">
                                <div class="vote-area pull-left">
                                    <span class="vote-up"></span>
                                    <span class="vote-counter text-center thousands">1239</span>
                                    <span class="vote-down"></span>
                                    <span class="accept-answer text-center accepted"><i class="icon-ok-circle icon-2x"></i></span>
                                </div>
                                <div class="answer-container">
                                    <p class="answer-body">
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin semper euismod leo, iaculis adipiscing lacus mollis sit amet. Mauris ante risus, placerat tincidunt congue eu, rhoncus porta purus. In pellentesque convallis imperdiet. Duis urna mauris, ultrices vitae tincidunt at, bibendum a sem. Vivamus consequat urna ac risus convallis in convallis dui adipiscing. In velit lacus, tempor a lobortis vel, posuere non mauris. Pellentesque aliquam, massa vel egestas commodo, orci est sollicitudin augue, at blandit purus justo laoreet metus. Sed ante leo, pellentesque sed semper non, ultricies et magna. Pellentesque ac neque lorem. Curabitur sed ullamcorper leo. Phasellus at nisi ut tellus adipiscing hendrerit vel in justo. Pellentesque lacinia, libero varius blandit viverra, nisi metus congue enim, vitae congue lectus nibh at nulla. Phasellus bibendum, tortor vel condimentum venenatis, velit justo luctus felis, ac vulputate odio ante vitae ipsum. Praesent non mi interdum massa facilisis pellentesque id sit amet odio. Suspendisse varius arcu eu diam vehicula tempus. Fusce elit lorem, pulvinar eget venenatis vel, porta et nisi. Nulla faucibus quam a urna faucibus vitae rhoncus mauris ornare. Curabitur volutpat venenatis nulla, ut sodales ligula dictum ac. Sed a mi sit amet mauris placerat rhoncus ut quis lectus. Fusce mauris enim, cursus.
                                    </p>
                                    <div class="started">
                                        <span class="action-time">answered Mar 30</span>
                                        <div class="user-info">
                                            <a href="#" class="username">Bustr</a>
                                            <span class="reputation"><i class="icon-trophy"></i> 345</span>
                                        </div>
                                    </div>
                                    <div class="comments">
                                        <div class="comment">
                                            Comment here!
                                        </div>
                                        <div class="comment">
                                            Another comment!
                                        </div>
                                        <form class="add_comment_form">
                                            <div class="control-group inputComment">
                                                <div class="controls">
                                                    <textarea rows="3" placeholder="" class="inputComment" name="comment"></textarea>
                                                </div>
                                                <span class="help-block"></span>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h3 class="add_new_answer">Add your answer</h3>
                    <form id="add_answer_form">
                        <div class="control-group inputAnswer">
                            <div class="controls">
                                <textarea rows="8" placeholder="try to answer it. Use at least 20 characters" id="inputAnswer" name="answer"></textarea>
                            </div>
                            <span class="help-block"></span>
                        </div>
                        <label class="checkbox">
                            <input type="checkbox" value="" name="anonymously">
                            Add Anonymously
                        </label>
                        <button type="button" class="btn" onclick="return addAnswer()">Post answer</button>
                        <button type="button" class="btn">Save draft</button>
                    </form>
                </div>

                <div class="span3">
                    <div class="sidebar-content affix">
                        <a href="https://google.com" class="ask-question-btn">Ask Question</a>
                    </div>
                </div>
            </div>
        </div>
    
    <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    </body>
</html>​